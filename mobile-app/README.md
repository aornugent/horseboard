# Mobile App (Controller)

This React Native application serves as the controller for the Dynamic Information Board service. It allows users to:
1.  Pair with a Google TV display client using a 6-digit code.
2.  Create, edit, and manage tabular data.
3.  Control which portion of the table is displayed on the Google TV.

## Development Setup

### Prerequisites
*   **Node.js:** Ensure Node.js (LTS version recommended) is installed. Download from [nodejs.org](https://nodejs.org/).
*   **npm or Yarn:** A JavaScript package manager. npm is included with Node.js. Yarn can be installed from [yarnpkg.com](https://yarnpkg.com/).
*   **React Native CLI:** Install the React Native command-line interface. Follow instructions at [reactnative.dev/docs/environment-setup](https://reactnative.dev/docs/environment-setup) (choose "React Native CLI Quickstart").
*   **Android Studio / Xcode:** Required for running on Android emulators/devices and iOS simulators/devices, respectively.
    *   **Android:** Java Development Kit (JDK), Android SDK.
    *   **iOS:** Xcode, CocoaPods.

### Project Setup (Conceptual - Actual project via CLI)
1.  **Clone the repository (if not done already):**
    ```bash
    git clone <repository-url>
    cd <repository-url>/mobile-app
    ```
2.  **Initialize React Native Project (if starting from scratch - this step would be done by a developer):**
    *The command `npx react-native init MobileApp` would typically be run in the parent directory, and then contents moved or this directory initialized directly.*
    *For this scaffold, we assume the project files will be placed here.*

3.  **Install Dependencies:**
    ```bash
    cd mobile-app
    npm install
    # or
    yarn install
    ```
4.  **iOS Specific (if developing for iOS):**
    ```bash
    cd ios
    pod install
    cd ..
    ```

### Running the App
*   **Start Metro Bundler:**
    ```bash
    npx react-native start
    ```
*   **Run on Android:**
    (Ensure an Android emulator is running or a device is connected)
    ```bash
    npx react-native run-android
    ```
*   **Run on iOS:**
    (Ensure an iOS simulator is running or a device is connected)
    ```bash
    npx react-native run-ios
    ```

## Project Structure (Simplified - actual structure generated by React Native CLI)

```
mobile-app/
├── android/            # Android specific project files
├── ios/                # iOS specific project files
├── src/                # Main application source code
│   ├── components/     # Reusable UI components (e.g., TableCell, SortButton)
│   ├── screens/        # Screen components (e.g., PairingScreen, TableEditorScreen)
│   ├── navigation/     # Navigation setup (e.g., React Navigation)
│   ├── services/       # API call logic, backend communication
│   ├── state/          # State management (e.g., Context, Redux, Zustand)
│   └── App.tsx         # Main App component (or App.js)
├── .gitignore
├── babel.config.js
├── index.js            # Entry point
├── metro.config.js
├── package.json
└── README.md
```

## Core Functionality

### 1. Pairing Screen (`src/screens/PairingScreen.tsx`)
*   UI: Input field for 6-digit code, "Connect" button.
*   Logic:
    *   Takes user input.
    *   Calls `POST /pair` backend endpoint.
    *   On success, navigates to `TableEditorScreen`, passing the `displayId`.

### 2. Table Editor Screen (`src/screens/TableEditorScreen.tsx`)
*   UI:
    *   Grid-like view of the table.
    *   "+" buttons for adding rows/columns.
    *   Column headers are tappable for sorting.
    *   "Display Settings" area for TV pagination control.
*   Logic:
    *   Manages table data state (e.g., using `useState`, `useReducer`, or a global state manager).
    *   **Edit Cell:** Tapping a cell allows text input.
    *   **Add Row/Column:** Modifies table data structure.
    *   **Sort:** Reorders rows based on selected column; cycles A-Z, Z-A.
    *   **Pagination Control:**
        *   Allows user to select which "page" of rows/columns is shown on TV.
        *   Prepares the data slice for the TV.
    *   **Data Sync:** Sends updated `tableData` (full or sliced for TV) to `PUT /display/{displayId}` backend endpoint upon changes.

## Backend Interaction
*   **Pairing:** `POST /pair`
    *   Request: `{ "code": "123456" }`
*   **Update Data:** `PUT /display/{displayId}`
    *   Request: `{ "tableData": { "headers": [...], "rows": [...] } }` (can be sliced data for TV)

This README will be updated as development progresses.
